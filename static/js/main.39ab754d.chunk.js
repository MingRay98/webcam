(this.webpackJsonpwebcam=this.webpackJsonpwebcam||[]).push([[0],{11:function(e,t,a){e.exports=a(17)},17:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),s=a.n(i),o=a(1),l=a(2),c=a(4),d=a(3),u=a(5),h=(a(8),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).init=function(){return window.isMobile?r.a.createElement("div",{className:"header"},r.a.createElement("button",{className:"headerBtn"},"++"),"Webcam",r.a.createElement("button",{className:"headerBtn",onClick:a.props.handleCameraChange}," turn")):r.a.createElement("div",{className:"header",style:{justifyContent:"center"}},"Webcam")},a.state={},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.init())}}]),t}(n.Component)),m=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("canvas",{id:"photoCanvas",className:"Stream"}))}}]),t}(n.Component),v=a(6),b=a.n(v),g=a(7),p=null,f=null,y=0,w=0,C=0,E=0,S=1;var k=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).startSlide=function(e){a.slider.addEventListener("mousemove",a.moveSlide,!1),a.slider.addEventListener("touchmove",a.moveSlide,!1)},a.moveSlide=function(e){S=parseFloat(e.target.value),y=p*S,w=f*S,C=a.videoCanvas.width/2-y/2,E=a.videoCanvas.height/2-w/2},a.stopSlide=function(e){a.slider.removeEventListener("mousemove",a.moveSlide,!1),a.slider.removeEventListener("touchmove",a.moveSlide,!1)},a.drawVideoToCanvas=function(){var e=a.videoCanvas.getContext("2d");e.clearRect(0,0,p,f),e.drawImage(a.video,C,E,y,w),requestAnimationFrame(a.drawVideoToCanvas)},a.handleTurnStream=function(e){console.log(e.target.innerHTML),"turn Off"===e.target.innerHTML?(a.stopStream(),e.target.innerHTML="turn On"):(a.getVideoStream(),a.drawVideoToCanvas(),e.target.innerHTML="turn Off")},a.stopStream=function(){a.video.srcObject.getTracks().forEach((function(e){e.stop()})),a.video.srcObject=null},a.takePhoto=function(){a.photoCanvas.width=p,a.photoCanvas.height=f,a.setState({imgSrc:a.videoCanvas.toDataURL()},(function(){a.drawPhoto()})),document.getElementById("savePhoto").style={display:""}},a.drawPhoto=function(){var e=a.photoCanvas.getContext("2d"),t=new Image;t.onload=function(){S>=1?(e.filter=a.props.filterStyle.blur+" "+a.props.filterStyle.grayscale+" "+a.props.filterStyle.brightness+" "+a.props.filterStyle.contrast,e.drawImage(t,0,0)):(a.photoCanvas.width=p*S,a.photoCanvas.height=f*S,e.drawImage(t,-C,-E))},t.src=a.state.imgSrc},a.downloadCanvasIamge=function(e){var t=document.getElementById("downloadImg");t.href=a.photoCanvas.toDataURL(),t.download="photo.png",t.click()},a.state={imgSrc:""},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.isMobile?(p=window.innerWidth,f=4*p/3,alert("Mobile Mode")):(p=.49*window.innerWidth,f=.5625*p),y=p,w=f,this.videoCanvas=document.getElementById("videoCanvas"),this.video=document.getElementById("video"),this.videoCanvas.width=p,this.videoCanvas.height=f,this.getVideoStream(),this.drawVideoToCanvas(),this.photoCanvas=document.getElementById("photoCanvas"),this.slider=document.getElementById("slider"),this.slider.addEventListener("touchstart",this.startSlide,!1),this.slider.addEventListener("touchend",this.stopSlide,!1)}},{key:"getVideoStream",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia(this.props.constraints);case 3:t=e.sent,console.log(this.props.constraints),this.video.srcObject=t,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e={filter:this.props.filterStyle.blur+" "+this.props.filterStyle.grayscale+" "+this.props.filterStyle.brightness+" "+this.props.filterStyle.contrast};return r.a.createElement("div",{align:"center"},r.a.createElement("video",{autoPlay:!0,id:"video",style:{display:"none"}}),r.a.createElement("canvas",{id:"videoCanvas",style:e,className:"Stream"}),r.a.createElement("br",null),r.a.createElement("input",{type:"range",min:"0.5",max:"1.5",step:"0.1",defaultValue:"1",id:"slider",className:"slider",onChange:this.moveSlide,style:{width:p-10,height:"1rem"}}),r.a.createElement("br",null),r.a.createElement("button",{id:"turn",onClick:this.handleTurnStream},"turn Off"),r.a.createElement("button",{onClick:this.takePhoto},"take photo"),r.a.createElement("button",{id:"savePhoto",style:{display:"none"},onClick:this.downloadCanvasIamge},"save photo"),r.a.createElement("a",{id:"downloadImg"}),r.a.createElement(m,{filterStyle:e}))}}]),t}(n.Component),j="user",O=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);window.isMobile=O;var I=0,x=0,M=1,L=95,T=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleCameraChange=function(){O?"user"===j?(j="environment",a.setState({constraints:{audio:!1,video:{facingMode:"environment"}}})):(j="user",a.setState({constraints:{audio:!1,video:{facingMode:"user"}}})):console.log("Isn't molibe "),a.buttonTurn.click(),a.buttonTurn.click()},a.addFliter=function(e){switch(e.target.value){case"blur":I+=1,a.setState({blur:"blur("+I+"px)"});break;case"grayscale":x+=10,a.setState({grayscale:"grayscale("+x+"%)"});break;case"contrast":M+=1,a.setState({contrast:"contrast("+M+")"});break;case"brightness":L+=5,a.setState({brightness:"brightness(."+L+")"})}},a.minusFliter=function(e){switch(e.target.value){case"blur":I-=1,a.setState({blur:"blur("+I+"px)"});break;case"grayscale":x-=10,a.setState({grayscale:"grayscale("+x+"%)"});break;case"contrast":M-=1,a.setState({contrast:"contrast("+M+")"});break;case"brightness":L-=5,a.setState({brightness:"brightness(."+L+")"})}},a.desktopList=function(){if(O)return r.a.createElement(k,{facing:j,constraints:a.state.constraints});var e={blur:a.state.blur,grayscale:a.state.grayscale,contrast:a.state.contrast,brightness:a.state.brightness};return r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{style:{width:"50vw"}},r.a.createElement(k,{facing:j,constraints:a.state.constraints,filterStyle:e})),r.a.createElement("div",{className:"desktopList",style:{width:"50vw",display:"flex",justifyContent:"space-between",flexWrap:"wrap"}},r.a.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"space-between"}},r.a.createElement("button",{onClick:a.addFliter,value:"blur"},"++"),a.state.blur,r.a.createElement("button",{onClick:a.minusFliter,value:"blur"},"--")),r.a.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"space-between"}},r.a.createElement("button",{onClick:a.addFliter,value:"grayscale"},"++"),a.state.grayscale,r.a.createElement("button",{onClick:a.minusFliter,value:"grayscale"},"--")),r.a.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"space-between"}},r.a.createElement("button",{onClick:a.addFliter,value:"contrast"},"++"),a.state.contrast,r.a.createElement("button",{onClick:a.minusFliter,value:"contrast"},"--")),r.a.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"space-between"}},r.a.createElement("button",{onClick:a.addFliter,value:"brightness"},"++"),a.state.brightness,r.a.createElement("button",{onClick:a.minusFliter,value:"brightness"},"--"))))},a.state={blur:"blur(0px)",grayscale:"grayscale(0%)",contrast:"contrast(1)",brightness:"brightness(.95)",constraints:{video:{facingMode:"user"},audio:!1}},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.buttonTurn=document.getElementById("turn")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(h,{handleCameraChange:this.handleCameraChange}),this.desktopList())}}]),t}(n.Component),B="1080",F="720",P="",N="",V="1";n.Component,Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},8:function(e,t,a){}},[[11,1,2]]]);
//# sourceMappingURL=main.39ab754d.chunk.js.map